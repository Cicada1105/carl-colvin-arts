"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LiteratureTypeHandler=LiteratureTypeHandler;exports.GenreHandler=GenreHandler;exports.EditingHandler=EditingHandler;exports.WordCountHandler=WordCountHandler;exports.DeadlineHandler=DeadlineHandler;exports.EmailHandler=EmailHandler;exports.SubmitHandler=SubmitHandler;var _dynamic=require("../data/dynamic");var _create=require("./create");var _update_progress=require("../../shared/methods/update_progress");function LiteratureTypeHandler(event){event.path[1].nextElementSibling!==null&&event.path[1].nextElementSibling.remove();if(event.target.value!=="none"){let selectedLitPos=event.target.selectedIndex-1;_dynamic.userSelectedData.literatureType=event.target.selectedOptions[0].text;(0,_update_progress.Next)(1);const callbackFunc=this;callbackFunc(selectedLitPos);}else(0,_update_progress.Previous)(0);}function GenreHandler(event){event.path[1].nextElementSibling!==null&&event.path[1].nextElementSibling.remove();if(event.target.value!=="none"){_dynamic.userSelectedData.genre=event.target.selectedOptions[0].text;(0,_update_progress.Next)(2);const callbackFunc=this;callbackFunc();}else(0,_update_progress.Previous)(1);}function EditingHandler(event){event.path[1].nextElementSibling!==null&&event.path[1].nextElementSibling.remove();if(event.target.value!=="none"){let selectedEditingTypePos=event.target.selectedIndex-1;_dynamic.userSelectedData.editingType=event.target.selectedOptions[0].text;(0,_update_progress.Next)(3);const callbackFunc=this;callbackFunc(selectedEditingTypePos);}else(0,_update_progress.Previous)(2);}function WordCountHandler(event){event.path[1].nextElementSibling!==null&&event.path[1].nextElementSibling.remove();let enteredValueStr=event.target.value;let enteredValueNum=parseInt(enteredValueStr);let rates=this.data;let callbackFunc=this.callBack;if(enteredValueNum>=event.target.min&&enteredValueNum<=event.target.max&&!(enteredValueStr==="")){_dynamic.userSelectedData.wordCount=enteredValueNum;let wordCountPos=rates.findIndex(rate=>enteredValueNum>=rate.min&&enteredValueNum<=rate.max);let currentRate=rates[wordCountPos];currentRate.flatRate&&(_dynamic.userSelectedData.pricing.flatRate=currentRate.flatRate);_dynamic.userSelectedData.pricing.perWord=currentRate.perWord;_dynamic.userSelectedData.pricing.perHour=currentRate.perHour;(0,_update_progress.Next)(4);callbackFunc();}else(0,_update_progress.Previous)(3);}function DeadlineHandler(event){event.path[1].nextElementSibling!==null&&event.path[1].nextElementSibling.remove();let enteredDateStr=event.target.value;let enteredDateMs=Date.parse(enteredDateStr);let[minDate,maxDate]=(0,_create.getMinMaxDates)(new Date());if(enteredDateMs>=minDate.getTime()&&enteredDateMs<=maxDate.getTime()){_dynamic.userSelectedData.deadline=enteredDateStr;(0,_update_progress.Next)(5);let callbackFunc=this;callbackFunc();}else(0,_update_progress.Previous)(4);}function EmailHandler(event){event.path[1].nextElementSibling!==null&&event.path[1].nextElementSibling.remove();if(event.target.value!==""){_dynamic.userSelectedData.email=event.target.value;let callbackFunc=this;callbackFunc();}}function SubmitHandler(event){let submitBtn=event.path[0];let msg=submitBtn.nextElementSibling;let parent=event.path[1];let currentPricing;currentPricing=_dynamic.userSelectedData.pricing.flatRate!==0?"$".concat(_dynamic.userSelectedData.pricing.flatRate," flat rate"):(_dynamic.userSelectedData.pricing.perWord!==0?"$".concat(_dynamic.userSelectedData.pricing.perWord*_dynamic.userSelectedData.wordCount," + "):"")+"$".concat(_dynamic.userSelectedData.pricing.perHour,"/hour");let pricingStr="Your pricing will be: ".concat(currentPricing,"\nDo you wish to continue?\n\n");let formulaStr="*Formula calculated by one of the following:\n"+"$$/hour\n"+"($$/word * # of words) + $$/hour\n"+"$$ flat rate";if(confirm(pricingStr.concat(formulaStr))){let sendingImg=document.createElement("img");sendingImg.setAttribute("src","../../resources/pg_imgs/contact_imgs/sending_envelope.png");sendingImg.setAttribute("id","sending_img");parent.replaceChild(sendingImg,submitBtn);msg.innerHTML="Sending...";setTimeout(()=>{msg.innerHTML="Message Sent!";parent.replaceChild(submitBtn,sendingImg);},2000);setTimeout(()=>{let callbackFunc=this;callbackFunc();},5000);}}