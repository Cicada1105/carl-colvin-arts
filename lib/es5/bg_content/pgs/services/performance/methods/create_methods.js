"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSection=void 0;var _methods=require("../../../../../global/methods");var _curtain_class=_interopRequireDefault(require("../curtain_class"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const createSection=headerData=>{let cont=(0,_methods.createElement)({className:"sectionCont"});let headerCont=createImageHeader(headerData.header);let dataCont=createStage(headerData.body);cont.appendChild(headerCont);cont.appendChild(dataCont);document.body.appendChild(cont);};exports.createSection=createSection;const createImageHeader=headerData=>{let cont=(0,_methods.createElement)({className:"centerHeaderCont"});let leftSymbol=(0,_methods.createImageElement)({src:headerData.image.path,alt:headerData.image.alt,className:"musicalSymbol"});let header=(0,_methods.createTextElement)({element:"h3",text:headerData.data});let rightSymbol=(0,_methods.createImageElement)({src:headerData.image.path,alt:headerData.image.alt,className:"musicalSymbol"});cont.appendChild(leftSymbol);cont.appendChild(header);cont.appendChild(rightSymbol);return cont;};const createStage=body=>{let cont=(0,_methods.createElement)({className:"bodyCont"});let stageCont=createBody(body.content);let stageFrontCont=(0,_methods.createElement)({className:"stageFront"});let curtainCont=createCurtain();cont.appendChild(stageCont);cont.appendChild(stageFrontCont);cont.appendChild(curtainCont);return cont;};const createBody=bodyText=>{const SPACING=32.5;const P_CENTER_POSITIONING=7.5;let cont=(0,_methods.createElement)({className:"stage"});document.body.style.overflowX="hidden";bodyText.forEach((str,i)=>{let text=(0,_methods.createTextElement)({text:str,className:"bodyText"});text.style.left=P_CENTER_POSITIONING+SPACING*i+"rem";cont.appendChild(text);});if(bodyText.length>1){let leftArrow;let rightArrow;const createArrows=(()=>{const SPACING=32.5;const P_CENTER_POSITIONING=7.5;let currentSlide=1;let slides=cont.querySelectorAll("p");leftArrow=(0,_methods.createElement)({element:'i',className:'fas fa-chevron-left'});leftArrow.style.visibility="hidden";leftArrow.addEventListener("click",()=>{if(currentSlide!==1){for(let slide of slides)slide.style.left=parseFloat(slide.style.left)+SPACING+"rem";currentSlide--;}leftArrow.style.visibility=currentSlide===1?"hidden":"visible";rightArrow.style.visibility=currentSlide===slides.length-1?"visible":"hidden";});rightArrow=(0,_methods.createElement)({element:"i",className:"fas fa-chevron-right",idName:"rightArrow"});rightArrow.addEventListener("click",()=>{if(currentSlide!==slides.length){for(let slide of slides)slide.style.left=parseFloat(slide.style.left)-SPACING+"rem";currentSlide++;}rightArrow.style.visibility=currentSlide===slides.length?"hidden":"visible";leftArrow.style.visibility=currentSlide===2?"visible":"hidden";});})();cont.appendChild(leftArrow);cont.appendChild(rightArrow);}return cont;};const createCurtain=()=>{let cont=(0,_methods.createElement)({element:"canvas",className:"curtains"});let ctx=cont.getContext("2d");let row_widths=[2,10,16,2,5,13,2,5,13,2,13,2,10,16,2,5,13,2,5,13,2,13,2,10,16,2,5,13,2,5,13,2,13,2,10,16,2,5,13,2,5];let curr_pos=0;row_widths.forEach(width=>{let rod=new _curtain_class.default(ctx,width,curr_pos);curr_pos+=width;rod.draw();});cont.addEventListener("click",()=>{let animationName=cont.style.animationName;if(cont.style.animationPlayState!=="running"){cont.style.animationName=animationName==="curtainClose"||animationName===""?"curtainOpen":"curtainClose";cont.style.animationPlayState="running";}});cont.addEventListener("animationend",()=>cont.style.animationPlayState="paused");return cont;};