"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidEmail=exports.getCurrentFile=exports.loadBootstrap=void 0;function _wrapRegExp(re,groups){_wrapRegExp=function _wrapRegExp(re,groups){return new BabelRegExp(re,undefined,groups);};var _RegExp=_wrapNativeSuper(RegExp);var _super=RegExp.prototype;var _groups=new WeakMap();function BabelRegExp(re,flags,groups){var _this=_RegExp.call(this,re,flags);_groups.set(_this,groups||_groups.get(re));return _this;}_inherits(BabelRegExp,_RegExp);BabelRegExp.prototype.exec=function(str){var result=_super.exec.call(this,str);if(result)result.groups=buildGroups(result,this);return result;};BabelRegExp.prototype[Symbol.replace]=function(str,substitution){if(typeof substitution==="string"){var groups=_groups.get(this);return _super[Symbol.replace].call(this,str,substitution.replace(/\$<([^>]+)>/g,function(_,name){return"$"+groups[name];}));}else if(typeof substitution==="function"){var _this=this;return _super[Symbol.replace].call(this,str,function(){var args=[];args.push.apply(args,arguments);if(typeof args[args.length-1]!=="object"){args.push(buildGroups(args,_this));}return substitution.apply(this,args);});}else{return _super[Symbol.replace].call(this,str,substitution);}};function buildGroups(result,re){var g=_groups.get(re);return Object.keys(g).reduce(function(groups,name){groups[name]=result[g[name]];return groups;},Object.create(null));}return _wrapRegExp.apply(this,arguments);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var __awaiter=void 0&&(void 0).__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};const getCurrentFile=()=>{let pathName=window.location.pathname;let pathArray=pathName.split("/");let currPg=pathArray[pathArray.length-1];let fileName=currPg.slice(0,currPg.length-5);return fileName;};exports.getCurrentFile=getCurrentFile;const loadBootstrap=()=>{let bootstrapLink=document.createElement('script');bootstrapLink.setAttribute('src','https://kit.fontawesome.com/296e9763f7.js');document.head.appendChild(bootstrapLink);};exports.loadBootstrap=loadBootstrap;const isValidEmail=email=>__awaiter(void 0,void 0,void 0,function*(){var _a,_b,_c,_d,_e,_f,_g,_h;let emailReport={validEmail:true};let ampMatch=(_a=email.match(/@/g))!==null&&_a!==void 0?_a:[];if(ampMatch.length!==1){if(ampMatch.length>1){let reaptingCharError={type:"Repeating Character",message:"@ symbol displayed more than once. Valid email contains only one @ symbol"};emailReport.validEmail=false;emailReport.report=reaptingCharError;return emailReport;}else{let missingCharError={type:"Missing Character",message:"Missing '@' symbol. Valid email requires '@' symbol"};emailReport.validEmail=false;emailReport.report=missingCharError;return emailReport;}}let emailSplit=email.split("@");let recipientLocalName=emailSplit[0];let domain=emailSplit[1];let startingRecipientMatch=(_b=recipientLocalName.match(/(?<!\W)((?<!\w)[!#$%&'*+-/=?^_`{|}~])/g))!==null&&_b!==void 0?_b:[];if(startingRecipientMatch.length===1){let invalidStartChar={type:"Invalid Character Location",subtype:"Invalid Recipient Starting Character",message:"Cannot begin email local name with ".concat(startingRecipientMatch[0])};emailReport.validEmail=false;emailReport.report=invalidStartChar;return emailReport;}let endingMatch=(_c=recipientLocalName.match(/([!#$%&'*+-/=?^_`{|}~](?!\w))(?!\W)/g))!==null&&_c!==void 0?_c:[];if(endingMatch.length===1){let invalidEndChar={type:"Invalid Character Location",subtype:"Invalid Recipient Trailing Character",message:"Cannot end email local name with ".concat(endingMatch[0])};emailReport.validEmail=false;emailReport.report=invalidEndChar;return emailReport;}let multiplValidChars=(_d=recipientLocalName.match(_wrapRegExp(/([!#-'\*-\/=\?\^-`\{-~])(?=\1)/,{validChar:1})))!==null&&_d!==void 0?_d:[];if(multiplValidChars.length>1){let invalidRepeatingChar={type:"Invalid Repeating Character",message:"".concat(multiplValidChars[0]," cannot be used more than once within local name")};emailReport.validEmail=false;emailReport.report=invalidRepeatingChar;return emailReport;}let startingDomainMatch=(_e=domain.match(/(?<!\W)((?<!\w)[.-])/g))!==null&&_e!==void 0?_e:[];if(startingDomainMatch.length===1){let invalidStartChar={type:"Invalid Character Location",subtype:"Invalid Domain Starting Character",message:"Cannot begin domain with ".concat(startingDomainMatch[0])};emailReport.validEmail=false;emailReport.report=invalidStartChar;return emailReport;}let endingDomainMatch=(_f=domain.match(/([.-](?!\w))(?!\W)/g))!==null&&_f!==void 0?_f:[];if(endingDomainMatch.length===1){let invalidEndChar={type:"Invalid Character Location",subtype:"Invalid Domain Trailing Character",message:"Cannot end domain with ".concat(endingDomainMatch[0])};emailReport.validEmail=false;emailReport.report=invalidEndChar;return emailReport;}let domains=domain.split(".");let domainName=domains[0];let TLDName=domains[1];let SLDName=(_g=domains[2])!==null&&_g!==void 0?_g:"";let domainNameMatch=(_h=domainName.match(/[^A-Za-z0-9-]/))!==null&&_h!==void 0?_h:[];if(domainNameMatch.length===1){let invalidChar={type:"Invalid Character",message:"Domain name cannot contain ".concat(domainNameMatch[0])};emailReport.validEmail=false;emailReport.report=invalidChar;return emailReport;}var validDomainsStr="";yield requestValidDomains().then(results=>{validDomainsStr=results;let validDomains=validDomainsStr.split("\n");var foundIndex=validDomains.findIndex(domain=>{return domain.localeCompare(TLDName.toUpperCase())===0;});if(foundIndex===-1){let tldError={type:"Invalid Domain Name",subtype:"Top Level Domain Name is invalid",message:"TLD Name ".concat(TLDName," cannot be found")};emailReport.validEmail=false;emailReport.report=tldError;}if(SLDName&&emailReport.validEmail){foundIndex=validDomains.findIndex(domain=>{return domain.localeCompare(SLDName.toUpperCase())===0;});if(foundIndex===-1){let sldError={type:"Invalid Domain Name",subtype:"Secondary Level Domain Name is invalid",message:"SLD Name ".concat(SLDName," cannot be found")};emailReport.validEmail=false;emailReport.report=sldError;}}});return emailReport;});exports.isValidEmail=isValidEmail;function requestValidDomains(){return __awaiter(this,void 0,void 0,function*(){let results="";yield request().then(values=>{results=values;}).catch(error=>{console.log("Error:\n"+error);});return results;});};let request=()=>{return new Promise((resolve,reject)=>{let xml=new XMLHttpRequest();xml.onreadystatechange=function(){if(this.readyState===4){if(this.status===200){resolve(this.responseText);}else{reject(this.responseText);}}};xml.open("GET","https://data.iana.org/TLD/tlds-alpha-by-domain.txt");xml.send();});};